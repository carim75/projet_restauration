{% extends 'base.html.twig' %}

{% block body %}


        <h1>Commandes</h1>

        <table class="table table-bordered">
            <thead class="thead-dark">
            <tr>
                <th class="text-center" scope="col">Nom</th>
                <th class="text-center" scope="col">Prix</th>
                <th class="text-center" scope="col">Quantité</th>
                <th class="text-center" scope="col">Unité</th>
                <th class="text-center" scope="col">Total</th>
            </tr>
            </thead>
            <tbody>


            {% for commande in commandes %}
                {% for achat in achats %}
                    {% if achat.commande.id == commande.id  %}
                        {% if soci != achat.produit.societe.nom %}
                          {% set soci=achat.produit.societe.nom %}
                            <tr ><th colspan="5" class="table-success text-center">{{ soci }}</th></tr>
                        {% endif %}
                        {% if tot != commande.id %}
                            {% set tot=commande.id %}
                            <tr>
                                <td class="text-center" style="font-weight: bolder"  colspan="5">Commande n° {{ commande.id }} Du {{ commande.date | date("d/m/Y")  }} D'un montant total de {{ commande.total }} €</td>
                            </tr>
                        {% endif %}

                        <tr>
                            <td class="text-center">{{ achat.produit.nom }}</td>
                            <td class="text-center">{{ achat.prix }} €</td>
                            <td class="text-center">{{ achat.quantite }}</td>
                            <td class="text-center">{{ achat.produit.unite }}</td>
                            {% set prix =achat.prix * achat.quantite %}
                            <td class="text-center">{{ prix }} €</td>
                        </tr>


                    {% endif %}
                {% endfor %}
            </tbody>
            {% endfor %}

        </table>


{% endblock %}